!function(){function n(n,t){var l;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(l=function(n,t){if(!n)return;if("string"==typeof n)return e(n,t);var l=Object.prototype.toString.call(n).slice(8,-1);"Object"===l&&n.constructor&&(l=n.constructor.name);if("Map"===l||"Set"===l)return Array.from(n);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return e(n,t)}(n))||t&&n&&"number"==typeof n.length){l&&(n=l);var i=0,o=function(){};return{s:o,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){l=n[Symbol.iterator]()},n:function(){var n=l.next();return a=n.done,n},e:function(n){s=!0,r=n},f:function(){try{a||null==l.return||l.return()}finally{if(s)throw r}}}}function e(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,l=new Array(e);t<e;t++)l[t]=n[t];return l}function t(n,e){for(var t=0;t<e.length;t++){var l=e[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(n,l.key,l)}}function l(n,e,l){return e&&t(n.prototype,e),l&&t(n,l),n}function i(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{hUFG:function(e,t,o){"use strict";o.r(t),o.d(t,"ConfigEditorModuleNgFactory",(function(){return U}));var r=o("8Y7J"),a=function n(){i(this,n)},s=o("9AJC"),u=o("pMnS"),c=o("TSSN"),d=o("i/5A"),f=o("s7LF"),m=o("jgx/"),g=o("G0yt"),p=o("SVse"),h=o("mrSG"),b=o("XkjI"),v=o("HyEY"),y=o("Vurf"),w=o("63OA"),k=o("rVO2"),C=o("4MJ8"),_=function(){function n(e,t,l,o){i(this,n),this.activeModal=e,this.translate=t,this.$toastr=l,this.$api=o,this.loading=!0,this.backupList=[]}return l(n,[{key:"ngOnInit",value:function(){var n=this;this.$api.get("/config-editor/backups").subscribe((function(e){n.loading=!1,n.backupList=e}),(function(e){n.loading=!1,n.$toastr.error(e.error.message,n.translate.instant("config.restore.toast_failed_to_load_backups"))}))}},{key:"restore",value:function(n){return this.activeModal.close(n)}},{key:"deleteAllBackups",value:function(){var n=this;return this.$api.delete("/config-editor/backups").subscribe((function(e){n.activeModal.dismiss(),n.$toastr.success(n.translate.instant("config.restore.toast_backups_deleted"),n.translate.instant("toast.title_success"))}),(function(e){return n.$toastr.error(e.error.message,n.translate.instant("config.restore.toast_failed_to_delete_backups"))}))}}]),n}(),E=function(){function e(n,t,l,o,r,a,s,u,c){i(this,e),this.$auth=n,this.$api=t,this.$md=l,this.$monacoEditor=o,this.$notification=r,this.$toastr=a,this.$route=s,this.translate=u,this.modalService=c,this.isMobile=!1,this.editorOptions={language:"json",theme:this.$auth.theme.startsWith("dark-mode")?"vs-dark":"vs-light",automaticLayout:!0},this.editorDecoractions=[],this.isMobile=this.$md.detect.mobile()}return l(e,[{key:"ngOnInit",value:function(){var n=this;this.visualViewPortEventCallback=function(){return n.visualViewPortChanged()},this.lastHeight=window.innerHeight,window.visualViewport&&!this.isMobile&&(window.visualViewport.addEventListener("resize",this.visualViewPortEventCallback,!0),this.$md.disableTouchMove()),this.$route.data.subscribe((function(e){n.homebridgeConfig=e.config})),this.monacoEditorModel={value:"{}",language:"json",uri:window.monaco?window.monaco.Uri.parse("a://homebridge/config.json"):void 0},window.monaco?this.setMonacoEditorModel():this.$monacoEditor.readyEvent.subscribe({next:function(){n.setMonacoEditorModel()}})}},{key:"onEditorInit",value:function(n){this.monacoEditor=n,this.monacoEditor.getModel().setValue(this.homebridgeConfig),window.editor=n}},{key:"onInitDiffEditor",value:function(n){this.monacoEditor=n.modifiedEditor,n.getModel().original.setValue(this.originalConfig),n.getModel().modified.setValue(this.homebridgeConfig),window.editor=n}},{key:"onSave",value:function(){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,l,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.saveInProgress){e.next=54;break}if(this.monacoEditor&&(this.editorDecoractions=this.monacoEditor.deltaDecorations(this.editorDecoractions,[])),this.saveInProgress=!0,e.prev=2,this.isMobile){e.next=25;break}return e.next=6,this.monacoEditor.getAction("editor.action.formatDocument").run();case 6:t=window.monaco.editor.getModelMarkers({owner:"json"}),l=n(t),e.prev=8,l.s();case 10:if((i=l.n()).done){e.next=16;break}if("Duplicate object key"!==i.value.message){e.next=14;break}return e.abrupt("return",(this.saveInProgress=!1,void this.$toastr.error(this.translate.instant("config.toast_config_invalid_json"),this.translate.instant("config.toast_title_config_syntax_error"))));case 14:e.next=10;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(8),l.e(e.t0);case 21:return e.prev=21,l.f(),e.finish(21);case 24:this.homebridgeConfig=this.monacoEditor.getModel().getValue();case 25:if(o=this.parseConfigFromEditor(),this.homebridgeConfig=JSON.stringify(o,null,4),"object"==typeof o.bridge){e.next=31;break}this.$toastr.error(this.translate.instant("config.toast_config_bridge_missing"),this.translate.instant("config.toast_title_config_error")),e.next=48;break;case 31:if(!/^([0-9A-Fa-f]{2}[:]){5}([0-9A-Fa-f]{2})$/.test(o.bridge.username)){e.next=47;break}if(!o.accessories||Array.isArray(o.accessories)){e.next=36;break}this.$toastr.error(this.translate.instant("config.toast_config_accessory_must_be_array"),this.translate.instant("config.toast_title_config_error")),e.next=45;break;case 36:if(!o.platforms||Array.isArray(o.platforms)){e.next=40;break}this.$toastr.error(this.translate.instant("config.toast_config_platform_must_be_array"),this.translate.instant("config.toast_title_config_error")),e.next=45;break;case 40:if(e.t1=o.platforms&&Array.isArray(o.platforms)&&!this.validateSection(o.platforms,"platform")||o.accessories&&Array.isArray(o.accessories)&&!this.validateSection(o.accessories,"accessory")||o.plugins&&Array.isArray(o.plugins)&&!this.validatePlugins(o.plugins),e.t1){e.next=45;break}return e.next=44,this.saveConfig(o);case 44:this.originalConfig="";case 45:e.next=48;break;case 47:this.$toastr.error(this.translate.instant("config.toast_config_username_format_error"),this.translate.instant("config.toast_title_config_error"));case 48:e.next=53;break;case 50:e.prev=50,e.t2=e.catch(2),this.$toastr.error(this.translate.instant("config.toast_config_invalid_json"),this.translate.instant("config.toast_title_config_syntax_error"));case 53:this.saveInProgress=!1;case 54:case"end":return e.stop()}}),e,this,[[2,50],[8,18,21,24]])})))}},{key:"parseConfigFromEditor",value:function(){try{return JSON.parse(this.homebridgeConfig)}catch(e){var n=b.parse(this.homebridgeConfig);return this.homebridgeConfig=JSON.stringify(n,null,4),this.monacoEditor&&this.monacoEditor.getModel().setValue(this.homebridgeConfig),n}}},{key:"saveConfig",value:function(n){var e=this;return this.$api.post("/config-editor",n).toPromise().then((function(n){e.$notification.configUpdated.next(),e.$toastr.success(e.translate.instant("config.toast_config_saved"),e.translate.instant("toast.title_success")),e.homebridgeConfig=JSON.stringify(n,null,4)})).catch((function(n){e.$toastr.error(e.translate.instant("config.toast_failed_to_save_config"),e.translate.instant("toast.title_error"))}))}},{key:"onRestore",value:function(){var n=this;this.modalService.open(_,{size:"lg"}).result.then((function(e){n.originalConfig||(n.originalConfig=n.homebridgeConfig),n.$api.get("/config-editor/backups/"+e).subscribe((function(e){n.$toastr.warning(n.translate.instant("config.toast_click_save_to_confirm_backup_restore"),n.translate.instant("config.toast_title_backup_loaded")),n.homebridgeConfig=JSON.stringify(e,null,4),n.monacoEditor&&window.editor.modifiedEditor&&(n.editorDecoractions=n.monacoEditor.deltaDecorations(n.editorDecoractions,[]),n.monacoEditor.executeEdits("beautifier",[{identifier:"delete",range:new monaco.Range(1,1,n.monacoEditor.getModel().getLineCount()+10,1),text:"",forceMoveMarkers:!0}]),n.monacoEditor.executeEdits("beautifier",[{identifier:"insert",range:new monaco.Range(1,1,1,1),text:n.homebridgeConfig,forceMoveMarkers:!0}]))}),(function(e){return n.$toastr.error(e.error.message||"Failed to load config backup",n.translate.instant("toast.title_error"))}))})).catch((function(){}))}},{key:"onExportConfig",value:function(){var n="data:text/json;charset=utf-8,"+encodeURIComponent(this.homebridgeConfig),e=document.createElement("a");e.setAttribute("href",n),e.setAttribute("download","config.json"),document.body.appendChild(e),e.click(),e.remove()}},{key:"onCancelRestore",value:function(){this.homebridgeConfig=this.originalConfig,this.originalConfig=""}},{key:"validateSection",value:function(e,t){var l,i=n(e);try{for(i.s();!(l=i.n()).done;){var o=l.value;if("object"!=typeof o||Array.isArray(o))return this.$toastr.error("All ".concat(t," blocks must be objects.")),this.highlightOffendingArrayItem(o),!1;if(!o[t])return this.$toastr.error("All ".concat(t,' blocks must contain the "').concat(t,'" attribute.')),this.highlightOffendingArrayItem(o),!1;if("string"!=typeof o[t])return this.$toastr.error('The "'.concat(t,'" attribute must be a string.')),this.highlightOffendingArrayItem(o),!1}}catch(r){i.e(r)}finally{i.f()}return!0}},{key:"validatePlugins",value:function(e){var t,l=n(e);try{for(l.s();!(t=l.n()).done;){if("string"!=typeof t.value)return this.$toastr.error("Each item in the plugins array must be a string."),!1}}catch(i){l.e(i)}finally{l.f()}return!0}},{key:"highlightOffendingArrayItem",value:function(n){var e=this;this.monacoEditor&&(n=JSON.stringify(n,null,4).split("\n").map((function(n){return"        "+n})).join("\n"),setTimeout((function(){var t=e.monacoEditor.getModel().findMatches(n);if(t.length){var l=t[0].range,i=new monaco.Range(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn);e.editorDecoractions=e.monacoEditor.deltaDecorations(e.editorDecoractions,[{range:i,options:{isWholeLine:!0,linesDecorationsClassName:"hb-monaco-editor-line-error"}}])}}),200))}},{key:"setMonacoEditorModel",value:function(){if(!window.monaco.languages.json.jsonDefaults.diagnosticsOptions.schemas.some((function(n){return"http://homebridge/config.json"===n.uri}))){var n=monaco.Uri.parse("a://homebridge/config.json");window.monaco.languages.json.jsonDefaults.setDiagnosticsOptions({allowComments:!1,validate:!0,schemas:[{uri:"http://homebridge/config.json",fileMatch:[n.toString()],schema:{type:"object",required:["bridge"],properties:{bridge:{type:"object",required:["name","username","port","pin"],properties:{name:{type:"string",description:"The Homebridge instance name.\nThis should be unique if you are running multiple instances of Homebridge.",default:"Homebridge"},username:{type:"string",description:"Homebridge username must be 6 pairs of colon-separated hexadecimal characters (A-F 0-9).\nYou should change this pin if you need to re-pair your instance with HomeKit.\nExample: 0E:89:49:64:91:86",default:"0E:89:49:64:91:86",pattern:"^([A-Fa-f0-9]{2}:){5}[A-Fa-f0-9]{2}$"},port:{type:"number",description:"The port Homebridge listens on.\nIf running more than one instance of Homebridge on the same server make sure each instance is given a unique port.",default:51173,minimum:1025,maximum:65534},pin:{type:"string",description:"The Homebridge instance pin.\nThis is used when pairing Homebridge to HomeKit.\nExample: 630-27-655",default:"630-27-655",pattern:"^([0-9]{3}-[0-9]{2}-[0-9]{3})$"},manufacturer:{type:"string",description:"The bridge manufacturer to be displayed in HomeKit"},model:{type:"string",description:"The bridge model to be displayed  in HomeKit"},bind:{description:"A string or an array of strings with the name(s) of the network interface(s) Homebridge should bind to.",type:["string","array"],items:{type:"string",description:"Network Interface name that Homebridge should bind to."}}},default:{name:"Homebridge",username:"0E:89:49:64:91:86",port:51173,pin:"630-27-655"}},mdns:{type:"object",description:"Tell Homebridge to listen on a specific interface or IP address. This is useful if your server has multiple interfaces.\n\nDepreciated as of Homebridge v1.3.0 - use bridge.bind instead.",required:["interface"],properties:{interface:{type:"string",description:"The interface or IP address of the interface you want Homebridge to listen on."}},default:{interface:""}},plugins:{type:"array",description:"An array of plugins that should be selectively enabled. Remove this array to enable all plugins.",items:{type:"string",description:"The full plugin npm package name.\nExample: homebridge-dummy"},default:["homebridge-config-ui-x"]},ports:{type:"object",description:"The range of ports that should be used for certain accessories like Cameras and TVs",required:["start","end"],properties:{start:{type:"number",default:52100,minimum:1025,maximum:65534},end:{type:"number",default:52150,minimum:1025,maximum:65534}},default:{start:52100,end:52150}},platforms:{type:"array",description:'Plugins that expose a "Platform" should have there config entered in this array.\nSeperate each plugin config block using a comma.',items:{type:"object",required:["platform"],anyOf:[{type:"object",required:["platform"],properties:{platform:{type:"string",description:"This is used by Homebridge to identify which plugin this platform belongs to.",not:{enum:["config"]}},name:{type:"string",description:"The name of the platform."}}},{type:"object",properties:{platform:{type:"string",description:'Homebridge Config UI X platform name must be set to "config".\nDo Not Change!',oneOf:[{enum:"config"}]},name:{type:"string",description:"The name used in the Homebridge log"}}}]}},accessories:{type:"array",description:'Plugins that expose a "Accessory" should have there config entered in this array.\nSeperate each plugin config block using a comma.',items:{type:"object",required:["accessory","name"],properties:{accessory:{type:"string",description:"This is used by Homebridge to identify which plugin this accessory belongs to."},name:{type:"string",description:"The name of the accessory."}}}}}}}]}),this.monacoEditorModel.uri=monaco.Uri.parse("a://homebridge/config.json")}}},{key:"visualViewPortChanged",value:function(){this.lastHeight<window.visualViewport.height&&document.activeElement.blur(),window.visualViewport.height<window.innerHeight?(this.$md.enableTouchMove(),this.lastHeight=window.visualViewport.height):window.visualViewport.height===window.innerHeight&&(this.$md.disableTouchMove(),this.lastHeight=window.visualViewport.height)}},{key:"ngOnDestroy",value:function(){window.visualViewport&&(window.visualViewport.removeEventListener("resize",this.visualViewPortEventCallback,!0),this.$md.enableTouchMove()),this.monacoEditor&&this.monacoEditor.dispose()}}]),e}(),I=o("EApP"),R=o("iInd"),x=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function M(n){return r["\u0275vid"](0,[(n()(),r["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-danger waves-effect"],["translate","form.button_cancel"]],[[8,"disabled",0]],[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.onCancelRestore()&&l),l}),null,null)),r["\u0275did"](1,8536064,null,0,c.f,[c.m,r.ElementRef,r.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),r["\u0275ted"](-1,null,["Cancel"]))],(function(n,e){n(e,1,0,"form.button_cancel")}),(function(n,e){n(e,0,0,e.component.saveInProgress)}))}function $(n){return r["\u0275vid"](0,[(n()(),r["\u0275eld"](0,0,null,null,0,"i",[["class","fas fa-spinner fa-pulse"]],null,null,null,null,null))],null,null)}function A(n){return r["\u0275vid"](0,[(n()(),r["\u0275eld"](0,0,null,null,2,"ngx-monaco-editor",[["class","flex-grow-1 h-100 w-100 mb-3 mt-3"]],null,[[null,"onInit"],[null,"keydown.control.s"],[null,"keydown.meta.s"]],(function(n,e,t){var l=!0,i=n.component;return"onInit"===e&&(l=!1!==i.onEditorInit(t)&&l),"keydown.control.s"===e&&(t.preventDefault(),l=!1!==i.onSave()&&l),"keydown.meta.s"===e&&(t.preventDefault(),l=!1!==i.onSave()&&l),l}),d.c,d.a)),r["\u0275prd"](5120,null,f.n,(function(n){return[n]}),[m.a]),r["\u0275did"](2,4374528,null,0,m.a,[r.NgZone,m.c],{options:[0,"options"],model:[1,"model"]},{onInit:"onInit"})],(function(n,e){var t=e.component;n(e,2,0,t.editorOptions,t.monacoEditorModel)}),null)}function j(n){return r["\u0275vid"](0,[(n()(),r["\u0275eld"](0,0,null,null,1,"ngx-monaco-diff-editor",[["class","flex-grow-1 h-100 w-100 mb-3 mt-3"]],null,[[null,"onInit"],[null,"keydown.control.s"],[null,"keydown.meta.s"]],(function(n,e,t){var l=!0,i=n.component;return"onInit"===e&&(l=!1!==i.onInitDiffEditor(t)&&l),"keydown.control.s"===e&&(t.preventDefault(),l=!1!==i.onSave()&&l),"keydown.meta.s"===e&&(t.preventDefault(),l=!1!==i.onSave()&&l),l}),d.d,d.b)),r["\u0275did"](1,4374528,null,0,m.d,[m.c],{options:[0,"options"],originalModel:[1,"originalModel"],modifiedModel:[2,"modifiedModel"]},{onInit:"onInit"})],(function(n,e){var t=e.component;n(e,1,0,t.editorOptions,t.monacoEditorModel,t.monacoEditorModel)}),null)}function T(n){return r["\u0275vid"](0,[(n()(),r["\u0275eld"](0,0,null,null,6,"textarea",[["autocapitalize","off"],["autocomplete","off"],["autocorrect","off"],["class","hb-plain-text-editor align-self-end h-100 w-100 mb-3 mt-3"],["spellcheck","false"],["wrap","off"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(n,e,t){var l=!0,i=n.component;return"input"===e&&(l=!1!==r["\u0275nov"](n,1)._handleInput(t.target.value)&&l),"blur"===e&&(l=!1!==r["\u0275nov"](n,1).onTouched()&&l),"compositionstart"===e&&(l=!1!==r["\u0275nov"](n,1)._compositionStart()&&l),"compositionend"===e&&(l=!1!==r["\u0275nov"](n,1)._compositionEnd(t.target.value)&&l),"ngModelChange"===e&&(l=!1!==(i.homebridgeConfig=t)&&l),l}),null,null)),r["\u0275did"](1,16384,null,0,f.d,[r.Renderer2,r.ElementRef,[2,f.a]],null,null),r["\u0275prd"](1024,null,f.n,(function(n){return[n]}),[f.d]),r["\u0275did"](3,671744,null,0,f.s,[[8,null],[8,null],[8,null],[6,f.n]],{model:[0,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,f.o,null,[f.s]),r["\u0275did"](5,16384,null,0,f.p,[[4,f.o]],null,null),(n()(),r["\u0275ted"](-1,null,["  "]))],(function(n,e){n(e,3,0,e.component.homebridgeConfig)}),(function(n,e){n(e,0,0,r["\u0275nov"](e,5).ngClassUntouched,r["\u0275nov"](e,5).ngClassTouched,r["\u0275nov"](e,5).ngClassPristine,r["\u0275nov"](e,5).ngClassDirty,r["\u0275nov"](e,5).ngClassValid,r["\u0275nov"](e,5).ngClassInvalid,r["\u0275nov"](e,5).ngClassPending)}))}function D(n){return r["\u0275vid"](0,[(n()(),r["\u0275eld"](0,0,null,null,28,"div",[["class","flex-column d-flex align-items-stretch h-100"]],null,null,null,null,null)),(n()(),r["\u0275eld"](1,0,null,null,21,"div",[["class","row"]],null,null,null,null,null)),(n()(),r["\u0275eld"](2,0,null,null,5,"div",[["class","col-sm-6 d-none d-sm-block"]],null,null,null,null,null)),(n()(),r["\u0275eld"](3,0,null,null,4,"h3",[["class","primary-text m-0"]],null,null,null,null,null)),(n()(),r["\u0275eld"](4,0,null,null,1,"span",[["class","d-none d-md-inline"]],null,null,null,null,null)),(n()(),r["\u0275ted"](-1,null,["Homebridge"])),(n()(),r["\u0275ted"](6,null,[" ",""])),r["\u0275pid"](131072,c.l,[c.m,r.ChangeDetectorRef]),(n()(),r["\u0275eld"](8,0,null,null,14,"div",[["class","col-sm-6 text-right"]],null,null,null,null,null)),(n()(),r["\u0275eld"](9,0,null,null,2,"button",[["class","btn btn-elegant waves-effect"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.onRestore()&&l),l}),null,null)),r["\u0275did"](10,8536064,null,0,c.f,[c.m,r.ElementRef,r.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),r["\u0275ted"](-1,null,["Restore"])),(n()(),r["\u0275eld"](12,16777216,null,null,3,"button",[["class","btn btn-elegant waves-effect"],["container","body"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.onExportConfig()&&l),l}),null,null)),r["\u0275did"](13,737280,null,0,g.fb,[r.ElementRef,r.Renderer2,r.Injector,r.ComponentFactoryResolver,r.ViewContainerRef,g.gb,r.NgZone,p.DOCUMENT,r.ChangeDetectorRef,r.ApplicationRef],{container:[0,"container"],ngbTooltip:[1,"ngbTooltip"]},null),r["\u0275pid"](131072,c.l,[c.m,r.ChangeDetectorRef]),(n()(),r["\u0275eld"](15,0,null,null,0,"i",[["class","fas fa-download"]],null,null,null,null,null)),(n()(),r["\u0275and"](16777216,null,null,1,null,M)),r["\u0275did"](17,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),r["\u0275eld"](18,0,null,null,4,"button",[["class","btn btn-primary waves-effect"]],[[8,"disabled",0]],[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.onSave()&&l),l}),null,null)),(n()(),r["\u0275ted"](19,null,[" "," "])),r["\u0275pid"](131072,c.l,[c.m,r.ChangeDetectorRef]),(n()(),r["\u0275and"](16777216,null,null,1,null,$)),r["\u0275did"](22,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),r["\u0275and"](16777216,null,null,1,null,A)),r["\u0275did"](24,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),r["\u0275and"](16777216,null,null,1,null,j)),r["\u0275did"](26,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),r["\u0275and"](16777216,null,null,1,null,T)),r["\u0275did"](28,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){var t=e.component;n(e,10,0,"config.button_restore"),n(e,13,0,"body",r["\u0275inlineInterpolate"](1,"",r["\u0275unv"](e,13,1,r["\u0275nov"](e,14).transform("logs.label_download")),"")),n(e,17,0,t.originalConfig),n(e,22,0,t.saveInProgress),n(e,24,0,!t.isMobile&&!t.originalConfig),n(e,26,0,!t.isMobile&&t.originalConfig),n(e,28,0,t.isMobile)}),(function(n,e){var t=e.component;n(e,6,0,r["\u0275unv"](e,6,0,r["\u0275nov"](e,7).transform("config.title_config"))),n(e,18,0,t.saveInProgress),n(e,19,0,r["\u0275unv"](e,19,0,r["\u0275nov"](e,20).transform("form.button_save")))}))}var O=r["\u0275ccf"]("app-config",E,(function(n){return r["\u0275vid"](0,[(n()(),r["\u0275eld"](0,0,null,null,1,"app-config",[],null,null,null,D,x)),r["\u0275did"](1,245760,null,0,E,[y.a,v.a,k.a,C.a,w.a,I.j,R.a,c.m,g.x],null,null)],(function(n,e){n(e,1,0)}),null)}),{},{},[]),V=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function S(n){return r["\u0275vid"](0,[(n()(),r["\u0275eld"](0,0,null,null,1,"div",[["class","text-center primary-text"]],null,null,null,null,null)),(n()(),r["\u0275eld"](1,0,null,null,0,"i",[["class","fa fa-cog fa-spin"],["style","font-size: 72px;"]],null,null,null,null,null))],null,null)}function H(n){return r["\u0275vid"](0,[(n()(),r["\u0275eld"](0,0,null,null,8,"tr",[],null,null,null,null,null)),(n()(),r["\u0275eld"](1,0,null,null,2,"td",[["class","w-100"]],null,null,null,null,null)),(n()(),r["\u0275ted"](2,null,["",""])),r["\u0275ppd"](3,2),(n()(),r["\u0275eld"](4,0,null,null,4,"td",[["nowrap",""]],null,null,null,null,null)),(n()(),r["\u0275eld"](5,0,null,null,3,"a",[["class","card-link"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.restore(n.context.$implicit.id)&&l),l}),null,null)),(n()(),r["\u0275ted"](6,null,[""," "])),r["\u0275pid"](131072,c.l,[c.m,r.ChangeDetectorRef]),(n()(),r["\u0275eld"](8,0,null,null,0,"i",[["class","fas fa-arrow-right"]],null,null,null,null,null))],null,(function(n,e){var t=r["\u0275unv"](e,2,0,n(e,3,0,r["\u0275nov"](e.parent.parent,0),e.context.$implicit.timestamp,"medium"));n(e,2,0,t),n(e,6,0,r["\u0275unv"](e,6,0,r["\u0275nov"](e,7).transform("config.restore.message_copy_to_editor")))}))}function N(n){return r["\u0275vid"](0,[(n()(),r["\u0275eld"](0,0,null,null,3,"table",[["class","table table-borderless table-hover table-sm"]],null,null,null,null,null)),(n()(),r["\u0275eld"](1,0,null,null,2,"tbody",[],null,null,null,null,null)),(n()(),r["\u0275and"](16777216,null,null,1,null,H)),r["\u0275did"](3,278528,null,0,p.NgForOf,[r.ViewContainerRef,r.TemplateRef,r.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(n,e){n(e,3,0,e.component.backupList)}),null)}function L(n){return r["\u0275vid"](0,[(n()(),r["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),r["\u0275eld"](1,0,null,null,2,"h3",[["class","text-center"]],null,null,null,null,null)),r["\u0275did"](2,8536064,null,0,c.f,[c.m,r.ElementRef,r.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),r["\u0275ted"](-1,null,["No Backups"]))],(function(n,e){n(e,2,0,"config.restore.message_no_backups")}),null)}function P(n){return r["\u0275vid"](0,[(n()(),r["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-elegant mr-auto"],["type","button"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.deleteAllBackups()&&l),l}),null,null)),r["\u0275did"](1,8536064,null,0,c.f,[c.m,r.ElementRef,r.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),r["\u0275ted"](-1,null,["Remove All Backups"]))],(function(n,e){n(e,1,0,"config.restore.button_remote_all_backups")}),null)}function F(n){return r["\u0275vid"](0,[r["\u0275pid"](0,p.DatePipe,[r.LOCALE_ID]),(n()(),r["\u0275eld"](1,0,null,null,20,"div",[["class","modal-content"]],null,null,null,null,null)),(n()(),r["\u0275eld"](2,0,null,null,6,"div",[["class","modal-header"]],null,null,null,null,null)),(n()(),r["\u0275eld"](3,0,null,null,2,"h5",[["class","modal-title"]],null,null,null,null,null)),r["\u0275did"](4,8536064,null,0,c.f,[c.m,r.ElementRef,r.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),r["\u0275ted"](-1,null,[" Restore Homebridge Config Backup "])),(n()(),r["\u0275eld"](6,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["data-dismiss","modal"],["type","button"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.activeModal.dismiss("Cross click")&&l),l}),null,null)),(n()(),r["\u0275eld"](7,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(n()(),r["\u0275ted"](-1,null,["\xd7"])),(n()(),r["\u0275eld"](9,0,null,null,6,"div",[["class","modal-body"]],null,null,null,null,null)),(n()(),r["\u0275and"](16777216,null,null,1,null,S)),r["\u0275did"](11,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),r["\u0275and"](16777216,null,null,1,null,N)),r["\u0275did"](13,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),r["\u0275and"](16777216,null,null,1,null,L)),r["\u0275did"](15,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),r["\u0275eld"](16,0,null,null,5,"div",[["class","modal-footer"]],null,null,null,null,null)),(n()(),r["\u0275and"](16777216,null,null,1,null,P)),r["\u0275did"](18,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),r["\u0275eld"](19,0,null,null,2,"button",[["class","btn btn-primary"],["data-dismiss","modal"],["type","button"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.activeModal.dismiss("Cross click")&&l),l}),null,null)),r["\u0275did"](20,8536064,null,0,c.f,[c.m,r.ElementRef,r.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),r["\u0275ted"](-1,null,["Cancel"]))],(function(n,e){var t=e.component;n(e,4,0,"config.restore.title_restore_homebridge_backup"),n(e,11,0,t.loading),n(e,13,0,!t.loading&&t.backupList&&t.backupList.length),n(e,15,0,!(t.loading||t.backupList&&t.backupList.length)),n(e,18,0,!t.loading&&t.backupList.length),n(e,20,0,"form.button_cancel")}),null)}var J=r["\u0275ccf"]("app-config.restore-backup",_,(function(n){return r["\u0275vid"](0,[(n()(),r["\u0275eld"](0,0,null,null,1,"app-config",[["class","restore-backup"]],null,null,null,F,V)),r["\u0275did"](1,114688,null,0,_,[g.d,c.m,I.j,v.a],null,null)],(function(n,e){n(e,1,0)}),null)}),{},{},[]),q=function(){function n(e,t,l){i(this,n),this.$api=e,this.$toastr=t,this.$router=l}return l(n,[{key:"resolve",value:function(n,e){var t=this;return this.$api.get("/config-editor").toPromise().then((function(n){return JSON.stringify(n,null,4)})).catch((function(n){t.$toastr.error(n.message,"Failed to Load Config"),t.$router.navigate(["/"])}))}}]),n}(),z=function n(){i(this,n)},U=r["\u0275cmf"](a,[],(function(n){return r["\u0275mod"]([r["\u0275mpd"](512,r.ComponentFactoryResolver,r["\u0275CodegenComponentFactoryResolver"],[[8,[s.a,s.b,s.j,s.k,s.g,s.h,s.i,u.a,O,J]],[3,r.ComponentFactoryResolver],r.NgModuleRef]),r["\u0275mpd"](4608,p.NgLocalization,p.NgLocaleLocalization,[r.LOCALE_ID]),r["\u0275mpd"](4608,f.z,f.z,[]),r["\u0275mpd"](4608,f.f,f.f,[]),r["\u0275mpd"](4608,g.x,g.x,[r.ComponentFactoryResolver,r.Injector,g.vb,g.y]),r["\u0275mpd"](4608,c.i,c.h,[]),r["\u0275mpd"](4608,c.d,c.g,[]),r["\u0275mpd"](4608,c.k,c.e,[]),r["\u0275mpd"](4608,c.c,c.b,[]),r["\u0275mpd"](4608,c.m,c.m,[c.n,c.i,c.d,c.k,c.c,c.o,c.q,c.p,c.a]),r["\u0275mpd"](4608,q,q,[v.a,I.j,R.l]),r["\u0275mpd"](1073742336,p.CommonModule,p.CommonModule,[]),r["\u0275mpd"](1073742336,f.y,f.y,[]),r["\u0275mpd"](1073742336,f.l,f.l,[]),r["\u0275mpd"](1073742336,f.v,f.v,[]),r["\u0275mpd"](1073742336,m.b,m.b,[]),r["\u0275mpd"](1073742336,g.c,g.c,[]),r["\u0275mpd"](1073742336,g.g,g.g,[]),r["\u0275mpd"](1073742336,g.i,g.i,[]),r["\u0275mpd"](1073742336,g.m,g.m,[]),r["\u0275mpd"](1073742336,g.n,g.n,[]),r["\u0275mpd"](1073742336,g.t,g.t,[]),r["\u0275mpd"](1073742336,g.v,g.v,[]),r["\u0275mpd"](1073742336,g.z,g.z,[]),r["\u0275mpd"](1073742336,g.B,g.B,[]),r["\u0275mpd"](1073742336,g.G,g.G,[]),r["\u0275mpd"](1073742336,g.L,g.L,[]),r["\u0275mpd"](1073742336,g.O,g.O,[]),r["\u0275mpd"](1073742336,g.T,g.T,[]),r["\u0275mpd"](1073742336,g.bb,g.bb,[]),r["\u0275mpd"](1073742336,g.eb,g.eb,[]),r["\u0275mpd"](1073742336,g.hb,g.hb,[]),r["\u0275mpd"](1073742336,g.kb,g.kb,[]),r["\u0275mpd"](1073742336,g.W,g.W,[]),r["\u0275mpd"](1073742336,g.A,g.A,[]),r["\u0275mpd"](1073742336,c.j,c.j,[]),r["\u0275mpd"](1073742336,R.p,R.p,[[2,R.u],[2,R.l]]),r["\u0275mpd"](1073742336,z,z,[]),r["\u0275mpd"](1073742336,a,a,[]),r["\u0275mpd"](1024,R.j,(function(){return[[{path:"",component:E,resolve:{config:q}}]]}),[]),r["\u0275mpd"](256,c.q,void 0,[]),r["\u0275mpd"](256,c.o,void 0,[]),r["\u0275mpd"](256,c.p,void 0,[]),r["\u0275mpd"](256,c.a,void 0,[])])}))}}])}();