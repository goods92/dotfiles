!function(){function t(t,n){for(var l=0;l<n.length;l++){var e=n[l];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function n(n,l,e){return l&&t(n.prototype,l),e&&t(n,e),n}function l(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{Yv9t:function(t,e,u){"use strict";u.r(e),u.d(e,"LinuxModuleNgFactory",(function(){return A}));var r=u("8Y7J"),a=function t(){l(this,t)},i=u("uA2L"),o=u("Xfmu"),s=u("oEX9"),c=u("1Fu1"),d=u("pMnS"),m=u("GFsM"),f=u("vAZj"),p=u("TSSN"),h=u("SVse"),g=u("HyEY"),v=u("+WIb"),_=u("Vurf"),w=function(){function t(n,e,u,r,a,i){l(this,t),this.$api=n,this.$ws=e,this.$auth=u,this.$toastr=r,this.translate=a,this.$router=i,this.io=this.$ws.connectToNamespace("status"),this.resp={},this.timeout=!1,this.error=!1}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.io.connected.subscribe((function(){t.io.socket.emit("monitor-server-status"),t.$auth.getAppSettings().catch()})),this.$api.put("/platform-tools/linux/restart-host",{}).subscribe((function(n){t.resp=n,t.checkIfServerUp()}),(function(n){t.error=t.translate.instant("platform.linux.restart.toast_server_restart_error"),t.$toastr.error("".concat(t.error,": ").concat(n.message),t.translate.instant("toast.title_error"))}))}},{key:"checkIfServerUp",value:function(){var t=this;this.checkDelay=setTimeout((function(){t.io.socket.on("homebridge-status",(function(n){"up"===n.status&&(t.$toastr.success(t.translate.instant("platform.linux.restart.toast_server_restarted"),t.translate.instant("toast.title_success")),t.$router.navigate(["/"]))}))}),3e4),this.checkTimeout=setTimeout((function(){t.$toastr.warning(t.translate.instant("platform.linux.restart.toast_server_taking_long_time_to_come_online"),t.translate.instant("toast.title_warning"),{timeOut:1e4}),t.timeout=!0}),12e4)}},{key:"ngOnDestroy",value:function(){this.io.end(),clearTimeout(this.checkDelay),clearTimeout(this.checkTimeout)}}]),t}(),k=u("EApP"),y=u("iInd"),x=r["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function I(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"app-spinner",[],null,null,null,m.b,m.a)),r["\u0275did"](1,114688,null,0,f.a,[],null,null)],(function(t,n){t(n,1,0)}),null)}function R(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,2,"p",[["class","grey-text"]],null,null,null,null,null)),r["\u0275did"](1,8536064,null,0,p.f,[p.m,r.ElementRef,r.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),r["\u0275ted"](-1,null,["Please wait, this page will automatically redirect when the Homebridge is back online."]))],(function(t,n){t(n,1,0,"platform.linux.restart.message_please_wait_while_server_restarts")}),null)}function b(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"p",[["class","grey-text"]],null,null,null,null,null)),(t()(),r["\u0275ted"](1,null,["",""]))],null,(function(t,n){t(n,1,0,n.component.error)}))}function T(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,2,"p",[["class","grey-text"]],null,null,null,null,null)),r["\u0275did"](2,8536064,null,0,p.f,[p.m,r.ElementRef,r.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),r["\u0275ted"](-1,null,["Server restart is taking a long time. You may need to bring up the server back up manually."]))],(function(t,n){t(n,2,0,"platform.linux.restart.message_server_taking_long_time_to_restart")}),null)}function $(t){return r["\u0275vid"](0,[(t()(),r["\u0275and"](16777216,null,null,1,null,I)),r["\u0275did"](1,16384,null,0,h.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275eld"](2,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(t()(),r["\u0275eld"](3,0,null,null,9,"div",[["class","col-md-12 text-center"]],null,null,null,null,null)),(t()(),r["\u0275eld"](4,0,null,null,2,"h3",[["class","primary-text"]],null,null,null,null,null)),r["\u0275did"](5,8536064,null,0,p.f,[p.m,r.ElementRef,r.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),r["\u0275ted"](-1,null,["Restarting Server"])),(t()(),r["\u0275and"](16777216,null,null,1,null,R)),r["\u0275did"](8,16384,null,0,h.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,b)),r["\u0275did"](10,16384,null,0,h.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,T)),r["\u0275did"](12,16384,null,0,h.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(t,n){var l=n.component;t(n,1,0,!l.error),t(n,5,0,"platform.linux.restart.title_restarting_server"),t(n,8,0,!l.timeout&&!l.error),t(n,10,0,l.error),t(n,12,0,l.timeout)}),null)}var C=r["\u0275ccf"]("app-restart-linux",w,(function(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"app-restart-linux",[],null,null,null,$,x)),r["\u0275did"](1,245760,null,0,w,[g.a,v.a,_.a,k.j,p.m,y.l],null,null)],(function(t,n){t(n,1,0)}),null)}),{},{},[]),S=function(){function t(n,e,u,r,a,i){l(this,t),this.$api=n,this.$ws=e,this.$auth=u,this.$toastr=r,this.translate=a,this.$router=i,this.io=this.$ws.connectToNamespace("status"),this.resp={},this.timeout=!1,this.error=!1}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.io.connected.subscribe((function(){t.io.socket.emit("monitor-server-status"),t.$auth.getAppSettings().catch()})),this.$api.put("/platform-tools/linux/shutdown-host",{}).subscribe((function(n){t.resp=n,t.checkIfServerUp()}),(function(n){t.error=t.translate.instant("platform.linux.restart.toast_server_restart_error"),t.$toastr.error("".concat(t.error,": ").concat(n.message),t.translate.instant("toast.title_error"))}))}},{key:"checkIfServerUp",value:function(){var t=this;this.checkDelay=setTimeout((function(){t.io.socket.on("homebridge-status",(function(n){"up"===n.status&&(t.$toastr.success(t.translate.instant("platform.linux.restart.toast_server_restarted"),t.translate.instant("toast.title_success")),t.$router.navigate(["/"]))}))}),3e4),this.checkTimeout=setTimeout((function(){t.$toastr.warning(t.translate.instant("platform.linux.restart.toast_server_taking_long_time_to_come_online"),t.translate.instant("toast.title_warning"),{timeOut:1e4}),t.timeout=!0}),12e4)}},{key:"ngOnDestroy",value:function(){this.io.end(),clearTimeout(this.checkDelay),clearTimeout(this.checkTimeout)}}]),t}(),D=r["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function N(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,2,"p",[["class","grey-text"]],null,null,null,null,null)),r["\u0275did"](1,8536064,null,0,p.f,[p.m,r.ElementRef,r.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),r["\u0275ted"](-1,null,["The server will power down shortly."]))],(function(t,n){t(n,1,0,"platform.linux.shutdown.message_server_will_power_down")}),null)}function E(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"p",[["class","grey-text"]],null,null,null,null,null)),(t()(),r["\u0275ted"](1,null,["",""]))],null,(function(t,n){t(n,1,0,n.component.error)}))}function j(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,7,"div",[["class","col-md-12 text-center"]],null,null,null,null,null)),(t()(),r["\u0275eld"](2,0,null,null,2,"h3",[["class","primary-text"]],null,null,null,null,null)),r["\u0275did"](3,8536064,null,0,p.f,[p.m,r.ElementRef,r.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),r["\u0275ted"](-1,null,["Shutting Down Server "])),(t()(),r["\u0275and"](16777216,null,null,1,null,N)),r["\u0275did"](6,16384,null,0,h.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,E)),r["\u0275did"](8,16384,null,0,h.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(t,n){var l=n.component;t(n,3,0,"platform.linux.shutdown.title_shutting_down_server"),t(n,6,0,!l.timeout&&!l.error),t(n,8,0,l.error)}),null)}var L=r["\u0275ccf"]("app-shutdown-linux",S,(function(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"app-shutdown-linux",[],null,null,null,j,D)),r["\u0275did"](1,245760,null,0,S,[g.a,v.a,_.a,k.j,p.m,y.l],null,null)],(function(t,n){t(n,1,0)}),null)}),{},{},[]),O=u("s7LF"),V=u("areh"),F=u("pKmL"),M=function t(){l(this,t)},A=r["\u0275cmf"](a,[],(function(t){return r["\u0275mod"]([r["\u0275mpd"](512,r.ComponentFactoryResolver,r["\u0275CodegenComponentFactoryResolver"],[[8,[i.g,i.h,i.i,i.j,i.k,i.l,i.m,i.n,i.o,i.p,i.q,i.r,i.s,i.t,i.u,i.v,i.w,i.x,i.y,i.c,i.d,i.e,i.f,o.a,s.a,c.a,d.a,C,L]],[3,r.ComponentFactoryResolver],r.NgModuleRef]),r["\u0275mpd"](4608,h.NgLocalization,h.NgLocaleLocalization,[r.LOCALE_ID]),r["\u0275mpd"](4608,O.z,O.z,[]),r["\u0275mpd"](4608,O.f,O.f,[]),r["\u0275mpd"](4608,V.c,V.c,[]),r["\u0275mpd"](5120,V.e,(function(){return[new V.j]}),[]),r["\u0275mpd"](4608,V.k,V.k,[]),r["\u0275mpd"](4608,V.d,V.d,[V.e,V.k]),r["\u0275mpd"](4608,p.i,p.h,[]),r["\u0275mpd"](4608,p.d,p.g,[]),r["\u0275mpd"](4608,p.k,p.e,[]),r["\u0275mpd"](4608,p.c,p.b,[]),r["\u0275mpd"](4608,p.m,p.m,[p.n,p.i,p.d,p.k,p.c,p.o,p.q,p.p,p.a]),r["\u0275mpd"](1073742336,h.CommonModule,h.CommonModule,[]),r["\u0275mpd"](1073742336,p.j,p.j,[]),r["\u0275mpd"](1073742336,O.y,O.y,[]),r["\u0275mpd"](1073742336,O.l,O.l,[]),r["\u0275mpd"](1073742336,O.v,O.v,[]),r["\u0275mpd"](1073742336,V.m,V.m,[]),r["\u0275mpd"](1073742336,V.l,V.l,[]),r["\u0275mpd"](1073742336,V.a,V.a,[]),r["\u0275mpd"](1073742336,F.a,F.a,[]),r["\u0275mpd"](1073742336,y.p,y.p,[[2,y.u],[2,y.l]]),r["\u0275mpd"](1073742336,M,M,[]),r["\u0275mpd"](1073742336,a,a,[]),r["\u0275mpd"](1024,y.j,(function(){return[[{path:"",redirectTo:"/",pathMatch:"full"},{path:"restart-server",component:w},{path:"shutdown-server",component:S}]]}),[]),r["\u0275mpd"](256,p.q,void 0,[]),r["\u0275mpd"](256,p.o,void 0,[]),r["\u0275mpd"](256,p.p,void 0,[]),r["\u0275mpd"](256,p.a,void 0,[])])}))}}])}();