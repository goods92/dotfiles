!function(){function n(n,t){for(var e=0;e<t.length;e++){var l=t[e];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(n,l.key,l)}}function t(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{jaWL:function(e,l,o){"use strict";o.r(l),o.d(l,"LogsModuleNgFactory",(function(){return z}));var a=o("8Y7J"),s=function n(){t(this,n)},i=o("pMnS"),r=o("SVse"),u=o("mrSG"),c=o("XNiG"),d=o("Iab2"),p=o("Vurf"),m=o("HyEY"),g=o("znvU"),f=o("/5R1"),b=function(){function e(n,l,o,a,s,i){t(this,e),this.$auth=n,this.$api=l,this.$log=o,this.$toastr=a,this.$translate=s,this.$modal=i,this.resizeEvent=new c.a}var l,o,a;return l=e,(o=[{key:"ngOnInit",value:function(){window.document.querySelector("body").classList.add("bg-black"),this.$log.startTerminal(this.termTarget,{},this.resizeEvent)}},{key:"onWindowResize",value:function(n){this.resizeEvent.next()}},{key:"ngOnDestroy",value:function(){window.document.querySelector("body").classList.remove("bg-black"),this.$log.destroyTerminal()}},{key:"downloadLogFile",value:function(){var n=this,t=this.$modal.open(f.a);t.componentInstance.title=this.$translate.instant("logs.title_download_log_file"),t.componentInstance.message=this.$translate.instant("logs.message_download_warning"),t.componentInstance.confirmButtonLabel=this.$translate.instant("logs.label_download"),t.result.then((function(){n.$api.get("/platform-tools/hb-service/log/download",{observe:"response",responseType:"blob"}).subscribe((function(n){Object(d.saveAs)(n.body,"homebridge.log.txt")}),(function(t){return Object(u.a)(n,void 0,void 0,regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.t0=JSON,n.next=4,t.error.text();case 4:n.t1=n.sent,e=n.t0.parse.call(n.t0,n.t1).message,n.next=10;break;case 8:n.prev=8,n.t2=n.catch(0);case 10:this.$toastr.error(e||"Failed to download log file",this.$translate.instant("toast.title_error"));case 11:case"end":return n.stop()}}),n,this,[[0,8]])})))}))})).catch((function(){}))}},{key:"truncateLogFile",value:function(){var n=this,t=this.$modal.open(f.a);t.componentInstance.title=this.$translate.instant("logs.title_truncate_log_file"),t.componentInstance.message=this.$translate.instant("logs.message_truncate_log_warning"),t.componentInstance.confirmButtonLabel=this.$translate.instant("logs.label_truncate"),t.result.then((function(){n.$api.put("/platform-tools/hb-service/log/truncate",{}).subscribe((function(t){n.$toastr.success(n.$translate.instant("logs.message_log_file_truncated"),n.$translate.instant("toast.title_success")),n.$log.term.clear()}),(function(t){n.$toastr.error(t.error.message||"Failed to truncate log file",n.$translate.instant("toast.title_error"))}))})).catch((function(){}))}}])&&n(l.prototype,o),a&&n(l,a),e}(),h=o("EApP"),v=o("TSSN"),w=o("G0yt"),y=a["\u0275crt"]({encapsulation:0,styles:[[".log-buttons[_ngcontent-%COMP%]{position:fixed;top:80px;right:10px;z-index:1000}.log-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:.4;transition:opacity .2s ease-in}.log-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .log-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}"]],data:{}});function $(n){return a["\u0275vid"](0,[(n()(),a["\u0275eld"](0,0,null,null,4,"div",[["class","log-buttons"]],null,null,null,null,null)),(n()(),a["\u0275eld"](1,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.downloadLogFile()&&l),l}),null,null)),(n()(),a["\u0275eld"](2,0,null,null,0,"i",[["class","fas fa-download"]],null,null,null,null,null)),(n()(),a["\u0275eld"](3,0,null,null,1,"button",[["class","btn btn-danger"]],null,[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.truncateLogFile()&&l),l}),null,null)),(n()(),a["\u0275eld"](4,0,null,null,0,"i",[["class","fas fa-trash-alt"]],null,null,null,null,null))],null,null)}function _(n){return a["\u0275vid"](0,[a["\u0275qud"](402653184,1,{termTarget:0}),(n()(),a["\u0275and"](16777216,null,null,1,null,$)),a["\u0275did"](2,16384,null,0,r.NgIf,[a.ViewContainerRef,a.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),a["\u0275eld"](3,0,null,null,1,"div",[["class","flex-column d-flex align-items-stretch h-100"]],null,null,null,null,null)),(n()(),a["\u0275eld"](4,0,[[1,0],["logoutput",1]],null,0,"div",[["class","terminal align-self-end w-100 h-100 mb-1"],["id","log-output"]],null,null,null,null,null))],(function(n,t){n(t,2,0,t.component.$auth.env.serviceMode)}),null)}var k=a["\u0275ccf"]("app-logs",b,(function(n){return a["\u0275vid"](0,[(n()(),a["\u0275eld"](0,0,null,null,1,"app-logs",[],null,[["window","resize"]],(function(n,t,e){var l=!0;return"window:resize"===t&&(l=!1!==a["\u0275nov"](n,1).onWindowResize(e)&&l),l}),_,y)),a["\u0275did"](1,245760,null,0,b,[p.a,m.a,g.a,h.j,v.m,w.x],null,null)],(function(n,t){n(t,1,0)}),null)}),{},{},[]),C=o("9AJC"),L=o("s7LF"),O=o("iInd"),x=function n(){t(this,n)},z=a["\u0275cmf"](s,[],(function(n){return a["\u0275mod"]([a["\u0275mpd"](512,a.ComponentFactoryResolver,a["\u0275CodegenComponentFactoryResolver"],[[8,[i.a,k,C.a,C.b,C.j,C.k,C.g,C.h,C.i]],[3,a.ComponentFactoryResolver],a.NgModuleRef]),a["\u0275mpd"](4608,r.NgLocalization,r.NgLocaleLocalization,[a.LOCALE_ID]),a["\u0275mpd"](4608,L.z,L.z,[]),a["\u0275mpd"](4608,w.x,w.x,[a.ComponentFactoryResolver,a.Injector,w.vb,w.y]),a["\u0275mpd"](1073742336,r.CommonModule,r.CommonModule,[]),a["\u0275mpd"](1073742336,O.p,O.p,[[2,O.u],[2,O.l]]),a["\u0275mpd"](1073742336,x,x,[]),a["\u0275mpd"](1073742336,w.c,w.c,[]),a["\u0275mpd"](1073742336,w.g,w.g,[]),a["\u0275mpd"](1073742336,w.i,w.i,[]),a["\u0275mpd"](1073742336,w.m,w.m,[]),a["\u0275mpd"](1073742336,w.n,w.n,[]),a["\u0275mpd"](1073742336,L.y,L.y,[]),a["\u0275mpd"](1073742336,L.l,L.l,[]),a["\u0275mpd"](1073742336,w.t,w.t,[]),a["\u0275mpd"](1073742336,w.v,w.v,[]),a["\u0275mpd"](1073742336,w.z,w.z,[]),a["\u0275mpd"](1073742336,w.B,w.B,[]),a["\u0275mpd"](1073742336,w.G,w.G,[]),a["\u0275mpd"](1073742336,w.L,w.L,[]),a["\u0275mpd"](1073742336,w.O,w.O,[]),a["\u0275mpd"](1073742336,w.T,w.T,[]),a["\u0275mpd"](1073742336,w.bb,w.bb,[]),a["\u0275mpd"](1073742336,w.eb,w.eb,[]),a["\u0275mpd"](1073742336,w.hb,w.hb,[]),a["\u0275mpd"](1073742336,w.kb,w.kb,[]),a["\u0275mpd"](1073742336,w.W,w.W,[]),a["\u0275mpd"](1073742336,w.A,w.A,[]),a["\u0275mpd"](1073742336,s,s,[]),a["\u0275mpd"](1024,O.j,(function(){return[[{path:"",component:b}]]}),[])])}))}}])}();