(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{Yv9t:function(t,l,n){"use strict";n.r(l),n.d(l,"LinuxModuleNgFactory",(function(){return A}));var e=n("8Y7J");class r{}var s=n("uA2L"),u=n("Xfmu"),i=n("oEX9"),a=n("1Fu1"),o=n("pMnS"),c=n("GFsM"),d=n("vAZj"),m=n("TSSN"),h=n("SVse"),p=n("HyEY"),f=n("+WIb"),g=n("Vurf");class v{constructor(t,l,n,e,r,s){this.$api=t,this.$ws=l,this.$auth=n,this.$toastr=e,this.translate=r,this.$router=s,this.io=this.$ws.connectToNamespace("status"),this.resp={},this.timeout=!1,this.error=!1}ngOnInit(){this.io.connected.subscribe(()=>{this.io.socket.emit("monitor-server-status"),this.$auth.getAppSettings().catch()}),this.$api.put("/platform-tools/linux/restart-host",{}).subscribe(t=>{this.resp=t,this.checkIfServerUp()},t=>{this.error=this.translate.instant("platform.linux.restart.toast_server_restart_error"),this.$toastr.error(`${this.error}: ${t.message}`,this.translate.instant("toast.title_error"))})}checkIfServerUp(){this.checkDelay=setTimeout(()=>{this.io.socket.on("homebridge-status",t=>{"up"===t.status&&(this.$toastr.success(this.translate.instant("platform.linux.restart.toast_server_restarted"),this.translate.instant("toast.title_success")),this.$router.navigate(["/"]))})},3e4),this.checkTimeout=setTimeout(()=>{this.$toastr.warning(this.translate.instant("platform.linux.restart.toast_server_taking_long_time_to_come_online"),this.translate.instant("toast.title_warning"),{timeOut:1e4}),this.timeout=!0},12e4)}ngOnDestroy(){this.io.end(),clearTimeout(this.checkDelay),clearTimeout(this.checkTimeout)}}var _=n("EApP"),w=n("iInd"),k=e["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function x(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,1,"app-spinner",[],null,null,null,c.b,c.a)),e["\u0275did"](1,114688,null,0,d.a,[],null,null)],(function(t,l){t(l,1,0)}),null)}function $(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,2,"p",[["class","grey-text"]],null,null,null,null,null)),e["\u0275did"](1,8536064,null,0,m.f,[m.m,e.ElementRef,e.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),e["\u0275ted"](-1,null,["Please wait, this page will automatically redirect when the Homebridge is back online."]))],(function(t,l){t(l,1,0,"platform.linux.restart.message_please_wait_while_server_restarts")}),null)}function y(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,1,"p",[["class","grey-text"]],null,null,null,null,null)),(t()(),e["\u0275ted"](1,null,["",""]))],null,(function(t,l){t(l,1,0,l.component.error)}))}function I(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(t()(),e["\u0275eld"](1,0,null,null,2,"p",[["class","grey-text"]],null,null,null,null,null)),e["\u0275did"](2,8536064,null,0,m.f,[m.m,e.ElementRef,e.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),e["\u0275ted"](-1,null,["Server restart is taking a long time. You may need to bring up the server back up manually."]))],(function(t,l){t(l,2,0,"platform.linux.restart.message_server_taking_long_time_to_restart")}),null)}function R(t){return e["\u0275vid"](0,[(t()(),e["\u0275and"](16777216,null,null,1,null,x)),e["\u0275did"](1,16384,null,0,h.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),e["\u0275eld"](2,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(t()(),e["\u0275eld"](3,0,null,null,9,"div",[["class","col-md-12 text-center"]],null,null,null,null,null)),(t()(),e["\u0275eld"](4,0,null,null,2,"h3",[["class","primary-text"]],null,null,null,null,null)),e["\u0275did"](5,8536064,null,0,m.f,[m.m,e.ElementRef,e.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),e["\u0275ted"](-1,null,["Restarting Server"])),(t()(),e["\u0275and"](16777216,null,null,1,null,$)),e["\u0275did"](8,16384,null,0,h.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),e["\u0275and"](16777216,null,null,1,null,y)),e["\u0275did"](10,16384,null,0,h.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),e["\u0275and"](16777216,null,null,1,null,I)),e["\u0275did"](12,16384,null,0,h.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(t,l){var n=l.component;t(l,1,0,!n.error),t(l,5,0,"platform.linux.restart.title_restarting_server"),t(l,8,0,!n.timeout&&!n.error),t(l,10,0,n.error),t(l,12,0,n.timeout)}),null)}function T(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,1,"app-restart-linux",[],null,null,null,R,k)),e["\u0275did"](1,245760,null,0,v,[p.a,f.a,g.a,_.j,m.m,w.l],null,null)],(function(t,l){t(l,1,0)}),null)}var b=e["\u0275ccf"]("app-restart-linux",v,T,{},{},[]);class C{constructor(t,l,n,e,r,s){this.$api=t,this.$ws=l,this.$auth=n,this.$toastr=e,this.translate=r,this.$router=s,this.io=this.$ws.connectToNamespace("status"),this.resp={},this.timeout=!1,this.error=!1}ngOnInit(){this.io.connected.subscribe(()=>{this.io.socket.emit("monitor-server-status"),this.$auth.getAppSettings().catch()}),this.$api.put("/platform-tools/linux/shutdown-host",{}).subscribe(t=>{this.resp=t,this.checkIfServerUp()},t=>{this.error=this.translate.instant("platform.linux.restart.toast_server_restart_error"),this.$toastr.error(`${this.error}: ${t.message}`,this.translate.instant("toast.title_error"))})}checkIfServerUp(){this.checkDelay=setTimeout(()=>{this.io.socket.on("homebridge-status",t=>{"up"===t.status&&(this.$toastr.success(this.translate.instant("platform.linux.restart.toast_server_restarted"),this.translate.instant("toast.title_success")),this.$router.navigate(["/"]))})},3e4),this.checkTimeout=setTimeout(()=>{this.$toastr.warning(this.translate.instant("platform.linux.restart.toast_server_taking_long_time_to_come_online"),this.translate.instant("toast.title_warning"),{timeOut:1e4}),this.timeout=!0},12e4)}ngOnDestroy(){this.io.end(),clearTimeout(this.checkDelay),clearTimeout(this.checkTimeout)}}var S=e["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function D(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,2,"p",[["class","grey-text"]],null,null,null,null,null)),e["\u0275did"](1,8536064,null,0,m.f,[m.m,e.ElementRef,e.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),e["\u0275ted"](-1,null,["The server will power down shortly."]))],(function(t,l){t(l,1,0,"platform.linux.shutdown.message_server_will_power_down")}),null)}function N(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,1,"p",[["class","grey-text"]],null,null,null,null,null)),(t()(),e["\u0275ted"](1,null,["",""]))],null,(function(t,l){t(l,1,0,l.component.error)}))}function E(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(t()(),e["\u0275eld"](1,0,null,null,7,"div",[["class","col-md-12 text-center"]],null,null,null,null,null)),(t()(),e["\u0275eld"](2,0,null,null,2,"h3",[["class","primary-text"]],null,null,null,null,null)),e["\u0275did"](3,8536064,null,0,m.f,[m.m,e.ElementRef,e.ChangeDetectorRef],{translate:[0,"translate"]},null),(t()(),e["\u0275ted"](-1,null,["Shutting Down Server "])),(t()(),e["\u0275and"](16777216,null,null,1,null,D)),e["\u0275did"](6,16384,null,0,h.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),e["\u0275and"](16777216,null,null,1,null,N)),e["\u0275did"](8,16384,null,0,h.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(t,l){var n=l.component;t(l,3,0,"platform.linux.shutdown.title_shutting_down_server"),t(l,6,0,!n.timeout&&!n.error),t(l,8,0,n.error)}),null)}function L(t){return e["\u0275vid"](0,[(t()(),e["\u0275eld"](0,0,null,null,1,"app-shutdown-linux",[],null,null,null,E,S)),e["\u0275did"](1,245760,null,0,C,[p.a,f.a,g.a,_.j,m.m,w.l],null,null)],(function(t,l){t(l,1,0)}),null)}var j=e["\u0275ccf"]("app-shutdown-linux",C,L,{},{},[]),V=n("s7LF"),F=n("areh"),M=n("pKmL");class O{}var A=e["\u0275cmf"](r,[],(function(t){return e["\u0275mod"]([e["\u0275mpd"](512,e.ComponentFactoryResolver,e["\u0275CodegenComponentFactoryResolver"],[[8,[s.g,s.h,s.i,s.j,s.k,s.l,s.m,s.n,s.o,s.p,s.q,s.r,s.s,s.t,s.u,s.v,s.w,s.x,s.y,s.c,s.d,s.e,s.f,u.a,i.a,a.a,o.a,b,j]],[3,e.ComponentFactoryResolver],e.NgModuleRef]),e["\u0275mpd"](4608,h.NgLocalization,h.NgLocaleLocalization,[e.LOCALE_ID]),e["\u0275mpd"](4608,V.z,V.z,[]),e["\u0275mpd"](4608,V.f,V.f,[]),e["\u0275mpd"](4608,F.c,F.c,[]),e["\u0275mpd"](5120,F.e,(function(){return[new F.j]}),[]),e["\u0275mpd"](4608,F.k,F.k,[]),e["\u0275mpd"](4608,F.d,F.d,[F.e,F.k]),e["\u0275mpd"](4608,m.i,m.h,[]),e["\u0275mpd"](4608,m.d,m.g,[]),e["\u0275mpd"](4608,m.k,m.e,[]),e["\u0275mpd"](4608,m.c,m.b,[]),e["\u0275mpd"](4608,m.m,m.m,[m.n,m.i,m.d,m.k,m.c,m.o,m.q,m.p,m.a]),e["\u0275mpd"](1073742336,h.CommonModule,h.CommonModule,[]),e["\u0275mpd"](1073742336,m.j,m.j,[]),e["\u0275mpd"](1073742336,V.y,V.y,[]),e["\u0275mpd"](1073742336,V.l,V.l,[]),e["\u0275mpd"](1073742336,V.v,V.v,[]),e["\u0275mpd"](1073742336,F.m,F.m,[]),e["\u0275mpd"](1073742336,F.l,F.l,[]),e["\u0275mpd"](1073742336,F.a,F.a,[]),e["\u0275mpd"](1073742336,M.a,M.a,[]),e["\u0275mpd"](1073742336,w.p,w.p,[[2,w.u],[2,w.l]]),e["\u0275mpd"](1073742336,O,O,[]),e["\u0275mpd"](1073742336,r,r,[]),e["\u0275mpd"](1024,w.j,(function(){return[[{path:"",redirectTo:"/",pathMatch:"full"},{path:"restart-server",component:v},{path:"shutdown-server",component:C}]]}),[]),e["\u0275mpd"](256,m.q,void 0,[]),e["\u0275mpd"](256,m.o,void 0,[]),e["\u0275mpd"](256,m.p,void 0,[]),e["\u0275mpd"](256,m.a,void 0,[])])}))}}]);