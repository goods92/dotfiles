(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{hUFG:function(n,e,t){"use strict";t.r(e),t.d(e,"ConfigEditorModuleNgFactory",(function(){return z}));var l=t("8Y7J");class i{}var o=t("9AJC"),r=t("pMnS"),s=t("TSSN"),a=t("i/5A"),u=t("s7LF"),d=t("jgx/"),c=t("G0yt"),m=t("SVse"),f=t("mrSG"),g=t("XkjI"),p=t("HyEY"),h=t("Vurf"),b=t("63OA"),v=t("rVO2"),y=t("4MJ8");class w{constructor(n,e,t,l){this.activeModal=n,this.translate=e,this.$toastr=t,this.$api=l,this.loading=!0,this.backupList=[]}ngOnInit(){this.$api.get("/config-editor/backups").subscribe(n=>{this.loading=!1,this.backupList=n},n=>{this.loading=!1,this.$toastr.error(n.error.message,this.translate.instant("config.restore.toast_failed_to_load_backups"))})}restore(n){return this.activeModal.close(n)}deleteAllBackups(){return this.$api.delete("/config-editor/backups").subscribe(n=>{this.activeModal.dismiss(),this.$toastr.success(this.translate.instant("config.restore.toast_backups_deleted"),this.translate.instant("toast.title_success"))},n=>this.$toastr.error(n.error.message,this.translate.instant("config.restore.toast_failed_to_delete_backups")))}}class C{constructor(n,e,t,l,i,o,r,s,a){this.$auth=n,this.$api=e,this.$md=t,this.$monacoEditor=l,this.$notification=i,this.$toastr=o,this.$route=r,this.translate=s,this.modalService=a,this.isMobile=!1,this.editorOptions={language:"json",theme:this.$auth.theme.startsWith("dark-mode")?"vs-dark":"vs-light",automaticLayout:!0},this.editorDecoractions=[],this.isMobile=this.$md.detect.mobile()}ngOnInit(){this.visualViewPortEventCallback=()=>this.visualViewPortChanged(),this.lastHeight=window.innerHeight,window.visualViewport&&!this.isMobile&&(window.visualViewport.addEventListener("resize",this.visualViewPortEventCallback,!0),this.$md.disableTouchMove()),this.$route.data.subscribe(n=>{this.homebridgeConfig=n.config}),this.monacoEditorModel={value:"{}",language:"json",uri:window.monaco?window.monaco.Uri.parse("a://homebridge/config.json"):void 0},window.monaco?this.setMonacoEditorModel():this.$monacoEditor.readyEvent.subscribe({next:()=>{this.setMonacoEditorModel()}})}onEditorInit(n){this.monacoEditor=n,this.monacoEditor.getModel().setValue(this.homebridgeConfig),window.editor=n}onInitDiffEditor(n){this.monacoEditor=n.modifiedEditor,n.getModel().original.setValue(this.originalConfig),n.getModel().modified.setValue(this.homebridgeConfig),window.editor=n}onSave(){return Object(f.a)(this,void 0,void 0,(function*(){if(!this.saveInProgress){this.monacoEditor&&(this.editorDecoractions=this.monacoEditor.deltaDecorations(this.editorDecoractions,[])),this.saveInProgress=!0;try{if(!this.isMobile){yield this.monacoEditor.getAction("editor.action.formatDocument").run();const n=window.monaco.editor.getModelMarkers({owner:"json"});for(const e of n)if("Duplicate object key"===e.message)return this.saveInProgress=!1,void this.$toastr.error(this.translate.instant("config.toast_config_invalid_json"),this.translate.instant("config.toast_title_config_syntax_error"));this.homebridgeConfig=this.monacoEditor.getModel().getValue()}const n=this.parseConfigFromEditor();this.homebridgeConfig=JSON.stringify(n,null,4),"object"!=typeof n.bridge?this.$toastr.error(this.translate.instant("config.toast_config_bridge_missing"),this.translate.instant("config.toast_title_config_error")):/^([0-9A-Fa-f]{2}[:]){5}([0-9A-Fa-f]{2})$/.test(n.bridge.username)?n.accessories&&!Array.isArray(n.accessories)?this.$toastr.error(this.translate.instant("config.toast_config_accessory_must_be_array"),this.translate.instant("config.toast_title_config_error")):n.platforms&&!Array.isArray(n.platforms)?this.$toastr.error(this.translate.instant("config.toast_config_platform_must_be_array"),this.translate.instant("config.toast_title_config_error")):n.platforms&&Array.isArray(n.platforms)&&!this.validateSection(n.platforms,"platform")||n.accessories&&Array.isArray(n.accessories)&&!this.validateSection(n.accessories,"accessory")||n.plugins&&Array.isArray(n.plugins)&&!this.validatePlugins(n.plugins)||(yield this.saveConfig(n),this.originalConfig=""):this.$toastr.error(this.translate.instant("config.toast_config_username_format_error"),this.translate.instant("config.toast_title_config_error"))}catch(n){this.$toastr.error(this.translate.instant("config.toast_config_invalid_json"),this.translate.instant("config.toast_title_config_syntax_error"))}this.saveInProgress=!1}}))}parseConfigFromEditor(){try{return JSON.parse(this.homebridgeConfig)}catch(n){const e=g.parse(this.homebridgeConfig);return this.homebridgeConfig=JSON.stringify(e,null,4),this.monacoEditor&&this.monacoEditor.getModel().setValue(this.homebridgeConfig),e}}saveConfig(n){return this.$api.post("/config-editor",n).toPromise().then(n=>{this.$notification.configUpdated.next(),this.$toastr.success(this.translate.instant("config.toast_config_saved"),this.translate.instant("toast.title_success")),this.homebridgeConfig=JSON.stringify(n,null,4)}).catch(n=>{this.$toastr.error(this.translate.instant("config.toast_failed_to_save_config"),this.translate.instant("toast.title_error"))})}onRestore(){this.modalService.open(w,{size:"lg"}).result.then(n=>{this.originalConfig||(this.originalConfig=this.homebridgeConfig),this.$api.get("/config-editor/backups/"+n).subscribe(n=>{this.$toastr.warning(this.translate.instant("config.toast_click_save_to_confirm_backup_restore"),this.translate.instant("config.toast_title_backup_loaded")),this.homebridgeConfig=JSON.stringify(n,null,4),this.monacoEditor&&window.editor.modifiedEditor&&(this.editorDecoractions=this.monacoEditor.deltaDecorations(this.editorDecoractions,[]),this.monacoEditor.executeEdits("beautifier",[{identifier:"delete",range:new monaco.Range(1,1,this.monacoEditor.getModel().getLineCount()+10,1),text:"",forceMoveMarkers:!0}]),this.monacoEditor.executeEdits("beautifier",[{identifier:"insert",range:new monaco.Range(1,1,1,1),text:this.homebridgeConfig,forceMoveMarkers:!0}]))},n=>this.$toastr.error(n.error.message||"Failed to load config backup",this.translate.instant("toast.title_error")))}).catch(()=>{})}onExportConfig(){const n="data:text/json;charset=utf-8,"+encodeURIComponent(this.homebridgeConfig),e=document.createElement("a");e.setAttribute("href",n),e.setAttribute("download","config.json"),document.body.appendChild(e),e.click(),e.remove()}onCancelRestore(){this.homebridgeConfig=this.originalConfig,this.originalConfig=""}validateSection(n,e){for(const t of n){if("object"!=typeof t||Array.isArray(t))return this.$toastr.error(`All ${e} blocks must be objects.`),this.highlightOffendingArrayItem(t),!1;if(!t[e])return this.$toastr.error(`All ${e} blocks must contain the "${e}" attribute.`),this.highlightOffendingArrayItem(t),!1;if("string"!=typeof t[e])return this.$toastr.error(`The "${e}" attribute must be a string.`),this.highlightOffendingArrayItem(t),!1}return!0}validatePlugins(n){for(const e of n)if("string"!=typeof e)return this.$toastr.error("Each item in the plugins array must be a string."),!1;return!0}highlightOffendingArrayItem(n){this.monacoEditor&&(n=JSON.stringify(n,null,4).split("\n").map(n=>"        "+n).join("\n"),setTimeout(()=>{const e=this.monacoEditor.getModel().findMatches(n);if(e.length){const n=e[0].range,t=new monaco.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);this.editorDecoractions=this.monacoEditor.deltaDecorations(this.editorDecoractions,[{range:t,options:{isWholeLine:!0,linesDecorationsClassName:"hb-monaco-editor-line-error"}}])}},200))}setMonacoEditorModel(){if(window.monaco.languages.json.jsonDefaults.diagnosticsOptions.schemas.some(n=>"http://homebridge/config.json"===n.uri))return;const n=monaco.Uri.parse("a://homebridge/config.json");window.monaco.languages.json.jsonDefaults.setDiagnosticsOptions({allowComments:!1,validate:!0,schemas:[{uri:"http://homebridge/config.json",fileMatch:[n.toString()],schema:{type:"object",required:["bridge"],properties:{bridge:{type:"object",required:["name","username","port","pin"],properties:{name:{type:"string",description:"The Homebridge instance name.\nThis should be unique if you are running multiple instances of Homebridge.",default:"Homebridge"},username:{type:"string",description:"Homebridge username must be 6 pairs of colon-separated hexadecimal characters (A-F 0-9).\nYou should change this pin if you need to re-pair your instance with HomeKit.\nExample: 0E:89:49:64:91:86",default:"0E:89:49:64:91:86",pattern:"^([A-Fa-f0-9]{2}:){5}[A-Fa-f0-9]{2}$"},port:{type:"number",description:"The port Homebridge listens on.\nIf running more than one instance of Homebridge on the same server make sure each instance is given a unique port.",default:51173,minimum:1025,maximum:65534},pin:{type:"string",description:"The Homebridge instance pin.\nThis is used when pairing Homebridge to HomeKit.\nExample: 630-27-655",default:"630-27-655",pattern:"^([0-9]{3}-[0-9]{2}-[0-9]{3})$"},manufacturer:{type:"string",description:"The bridge manufacturer to be displayed in HomeKit"},model:{type:"string",description:"The bridge model to be displayed  in HomeKit"},bind:{description:"A string or an array of strings with the name(s) of the network interface(s) Homebridge should bind to.",type:["string","array"],items:{type:"string",description:"Network Interface name that Homebridge should bind to."}}},default:{name:"Homebridge",username:"0E:89:49:64:91:86",port:51173,pin:"630-27-655"}},mdns:{type:"object",description:"Tell Homebridge to listen on a specific interface or IP address. This is useful if your server has multiple interfaces.\n\nDepreciated as of Homebridge v1.3.0 - use bridge.bind instead.",required:["interface"],properties:{interface:{type:"string",description:"The interface or IP address of the interface you want Homebridge to listen on."}},default:{interface:""}},plugins:{type:"array",description:"An array of plugins that should be selectively enabled. Remove this array to enable all plugins.",items:{type:"string",description:"The full plugin npm package name.\nExample: homebridge-dummy"},default:["homebridge-config-ui-x"]},ports:{type:"object",description:"The range of ports that should be used for certain accessories like Cameras and TVs",required:["start","end"],properties:{start:{type:"number",default:52100,minimum:1025,maximum:65534},end:{type:"number",default:52150,minimum:1025,maximum:65534}},default:{start:52100,end:52150}},platforms:{type:"array",description:'Plugins that expose a "Platform" should have there config entered in this array.\nSeperate each plugin config block using a comma.',items:{type:"object",required:["platform"],anyOf:[{type:"object",required:["platform"],properties:{platform:{type:"string",description:"This is used by Homebridge to identify which plugin this platform belongs to.",not:{enum:["config"]}},name:{type:"string",description:"The name of the platform."}}},{type:"object",properties:{platform:{type:"string",description:'Homebridge Config UI X platform name must be set to "config".\nDo Not Change!',oneOf:[{enum:"config"}]},name:{type:"string",description:"The name used in the Homebridge log"}}}]}},accessories:{type:"array",description:'Plugins that expose a "Accessory" should have there config entered in this array.\nSeperate each plugin config block using a comma.',items:{type:"object",required:["accessory","name"],properties:{accessory:{type:"string",description:"This is used by Homebridge to identify which plugin this accessory belongs to."},name:{type:"string",description:"The name of the accessory."}}}}}}}]}),this.monacoEditorModel.uri=monaco.Uri.parse("a://homebridge/config.json")}visualViewPortChanged(){this.lastHeight<window.visualViewport.height&&document.activeElement.blur(),window.visualViewport.height<window.innerHeight?(this.$md.enableTouchMove(),this.lastHeight=window.visualViewport.height):window.visualViewport.height===window.innerHeight&&(this.$md.disableTouchMove(),this.lastHeight=window.visualViewport.height)}ngOnDestroy(){window.visualViewport&&(window.visualViewport.removeEventListener("resize",this.visualViewPortEventCallback,!0),this.$md.enableTouchMove()),this.monacoEditor&&this.monacoEditor.dispose()}}var _=t("EApP"),k=t("iInd"),E=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function I(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-danger waves-effect"],["translate","form.button_cancel"]],[[8,"disabled",0]],[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.onCancelRestore()&&l),l}),null,null)),l["\u0275did"](1,8536064,null,0,s.f,[s.m,l.ElementRef,l.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),l["\u0275ted"](-1,null,["Cancel"]))],(function(n,e){n(e,1,0,"form.button_cancel")}),(function(n,e){n(e,0,0,e.component.saveInProgress)}))}function R(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,0,"i",[["class","fas fa-spinner fa-pulse"]],null,null,null,null,null))],null,null)}function M(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,2,"ngx-monaco-editor",[["class","flex-grow-1 h-100 w-100 mb-3 mt-3"]],null,[[null,"onInit"],[null,"keydown.control.s"],[null,"keydown.meta.s"]],(function(n,e,t){var l=!0,i=n.component;return"onInit"===e&&(l=!1!==i.onEditorInit(t)&&l),"keydown.control.s"===e&&(t.preventDefault(),l=!1!==i.onSave()&&l),"keydown.meta.s"===e&&(t.preventDefault(),l=!1!==i.onSave()&&l),l}),a.c,a.a)),l["\u0275prd"](5120,null,u.n,(function(n){return[n]}),[d.a]),l["\u0275did"](2,4374528,null,0,d.a,[l.NgZone,d.c],{options:[0,"options"],model:[1,"model"]},{onInit:"onInit"})],(function(n,e){var t=e.component;n(e,2,0,t.editorOptions,t.monacoEditorModel)}),null)}function $(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,1,"ngx-monaco-diff-editor",[["class","flex-grow-1 h-100 w-100 mb-3 mt-3"]],null,[[null,"onInit"],[null,"keydown.control.s"],[null,"keydown.meta.s"]],(function(n,e,t){var l=!0,i=n.component;return"onInit"===e&&(l=!1!==i.onInitDiffEditor(t)&&l),"keydown.control.s"===e&&(t.preventDefault(),l=!1!==i.onSave()&&l),"keydown.meta.s"===e&&(t.preventDefault(),l=!1!==i.onSave()&&l),l}),a.d,a.b)),l["\u0275did"](1,4374528,null,0,d.d,[d.c],{options:[0,"options"],originalModel:[1,"originalModel"],modifiedModel:[2,"modifiedModel"]},{onInit:"onInit"})],(function(n,e){var t=e.component;n(e,1,0,t.editorOptions,t.monacoEditorModel,t.monacoEditorModel)}),null)}function D(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,6,"textarea",[["autocapitalize","off"],["autocomplete","off"],["autocorrect","off"],["class","hb-plain-text-editor align-self-end h-100 w-100 mb-3 mt-3"],["spellcheck","false"],["wrap","off"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(n,e,t){var i=!0,o=n.component;return"input"===e&&(i=!1!==l["\u0275nov"](n,1)._handleInput(t.target.value)&&i),"blur"===e&&(i=!1!==l["\u0275nov"](n,1).onTouched()&&i),"compositionstart"===e&&(i=!1!==l["\u0275nov"](n,1)._compositionStart()&&i),"compositionend"===e&&(i=!1!==l["\u0275nov"](n,1)._compositionEnd(t.target.value)&&i),"ngModelChange"===e&&(i=!1!==(o.homebridgeConfig=t)&&i),i}),null,null)),l["\u0275did"](1,16384,null,0,u.d,[l.Renderer2,l.ElementRef,[2,u.a]],null,null),l["\u0275prd"](1024,null,u.n,(function(n){return[n]}),[u.d]),l["\u0275did"](3,671744,null,0,u.s,[[8,null],[8,null],[8,null],[6,u.n]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,u.o,null,[u.s]),l["\u0275did"](5,16384,null,0,u.p,[[4,u.o]],null,null),(n()(),l["\u0275ted"](-1,null,["  "]))],(function(n,e){n(e,3,0,e.component.homebridgeConfig)}),(function(n,e){n(e,0,0,l["\u0275nov"](e,5).ngClassUntouched,l["\u0275nov"](e,5).ngClassTouched,l["\u0275nov"](e,5).ngClassPristine,l["\u0275nov"](e,5).ngClassDirty,l["\u0275nov"](e,5).ngClassValid,l["\u0275nov"](e,5).ngClassInvalid,l["\u0275nov"](e,5).ngClassPending)}))}function T(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,28,"div",[["class","flex-column d-flex align-items-stretch h-100"]],null,null,null,null,null)),(n()(),l["\u0275eld"](1,0,null,null,21,"div",[["class","row"]],null,null,null,null,null)),(n()(),l["\u0275eld"](2,0,null,null,5,"div",[["class","col-sm-6 d-none d-sm-block"]],null,null,null,null,null)),(n()(),l["\u0275eld"](3,0,null,null,4,"h3",[["class","primary-text m-0"]],null,null,null,null,null)),(n()(),l["\u0275eld"](4,0,null,null,1,"span",[["class","d-none d-md-inline"]],null,null,null,null,null)),(n()(),l["\u0275ted"](-1,null,["Homebridge"])),(n()(),l["\u0275ted"](6,null,[" ",""])),l["\u0275pid"](131072,s.l,[s.m,l.ChangeDetectorRef]),(n()(),l["\u0275eld"](8,0,null,null,14,"div",[["class","col-sm-6 text-right"]],null,null,null,null,null)),(n()(),l["\u0275eld"](9,0,null,null,2,"button",[["class","btn btn-elegant waves-effect"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.onRestore()&&l),l}),null,null)),l["\u0275did"](10,8536064,null,0,s.f,[s.m,l.ElementRef,l.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),l["\u0275ted"](-1,null,["Restore"])),(n()(),l["\u0275eld"](12,16777216,null,null,3,"button",[["class","btn btn-elegant waves-effect"],["container","body"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.onExportConfig()&&l),l}),null,null)),l["\u0275did"](13,737280,null,0,c.fb,[l.ElementRef,l.Renderer2,l.Injector,l.ComponentFactoryResolver,l.ViewContainerRef,c.gb,l.NgZone,m.DOCUMENT,l.ChangeDetectorRef,l.ApplicationRef],{container:[0,"container"],ngbTooltip:[1,"ngbTooltip"]},null),l["\u0275pid"](131072,s.l,[s.m,l.ChangeDetectorRef]),(n()(),l["\u0275eld"](15,0,null,null,0,"i",[["class","fas fa-download"]],null,null,null,null,null)),(n()(),l["\u0275and"](16777216,null,null,1,null,I)),l["\u0275did"](17,16384,null,0,m.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275eld"](18,0,null,null,4,"button",[["class","btn btn-primary waves-effect"]],[[8,"disabled",0]],[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.onSave()&&l),l}),null,null)),(n()(),l["\u0275ted"](19,null,[" "," "])),l["\u0275pid"](131072,s.l,[s.m,l.ChangeDetectorRef]),(n()(),l["\u0275and"](16777216,null,null,1,null,R)),l["\u0275did"](22,16384,null,0,m.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275and"](16777216,null,null,1,null,M)),l["\u0275did"](24,16384,null,0,m.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275and"](16777216,null,null,1,null,$)),l["\u0275did"](26,16384,null,0,m.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275and"](16777216,null,null,1,null,D)),l["\u0275did"](28,16384,null,0,m.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){var t=e.component;n(e,10,0,"config.button_restore"),n(e,13,0,"body",l["\u0275inlineInterpolate"](1,"",l["\u0275unv"](e,13,1,l["\u0275nov"](e,14).transform("logs.label_download")),"")),n(e,17,0,t.originalConfig),n(e,22,0,t.saveInProgress),n(e,24,0,!t.isMobile&&!t.originalConfig),n(e,26,0,!t.isMobile&&t.originalConfig),n(e,28,0,t.isMobile)}),(function(n,e){var t=e.component;n(e,6,0,l["\u0275unv"](e,6,0,l["\u0275nov"](e,7).transform("config.title_config"))),n(e,18,0,t.saveInProgress),n(e,19,0,l["\u0275unv"](e,19,0,l["\u0275nov"](e,20).transform("form.button_save")))}))}function j(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,1,"app-config",[],null,null,null,T,E)),l["\u0275did"](1,245760,null,0,C,[h.a,p.a,v.a,y.a,b.a,_.j,k.a,s.m,c.x],null,null)],(function(n,e){n(e,1,0)}),null)}var x=l["\u0275ccf"]("app-config",C,j,{},{},[]),A=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function V(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","text-center primary-text"]],null,null,null,null,null)),(n()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","fa fa-cog fa-spin"],["style","font-size: 72px;"]],null,null,null,null,null))],null,null)}function H(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,8,"tr",[],null,null,null,null,null)),(n()(),l["\u0275eld"](1,0,null,null,2,"td",[["class","w-100"]],null,null,null,null,null)),(n()(),l["\u0275ted"](2,null,["",""])),l["\u0275ppd"](3,2),(n()(),l["\u0275eld"](4,0,null,null,4,"td",[["nowrap",""]],null,null,null,null,null)),(n()(),l["\u0275eld"](5,0,null,null,3,"a",[["class","card-link"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.restore(n.context.$implicit.id)&&l),l}),null,null)),(n()(),l["\u0275ted"](6,null,[""," "])),l["\u0275pid"](131072,s.l,[s.m,l.ChangeDetectorRef]),(n()(),l["\u0275eld"](8,0,null,null,0,"i",[["class","fas fa-arrow-right"]],null,null,null,null,null))],null,(function(n,e){var t=l["\u0275unv"](e,2,0,n(e,3,0,l["\u0275nov"](e.parent.parent,0),e.context.$implicit.timestamp,"medium"));n(e,2,0,t),n(e,6,0,l["\u0275unv"](e,6,0,l["\u0275nov"](e,7).transform("config.restore.message_copy_to_editor")))}))}function O(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,3,"table",[["class","table table-borderless table-hover table-sm"]],null,null,null,null,null)),(n()(),l["\u0275eld"](1,0,null,null,2,"tbody",[],null,null,null,null,null)),(n()(),l["\u0275and"](16777216,null,null,1,null,H)),l["\u0275did"](3,278528,null,0,m.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(n,e){n(e,3,0,e.component.backupList)}),null)}function N(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),l["\u0275eld"](1,0,null,null,2,"h3",[["class","text-center"]],null,null,null,null,null)),l["\u0275did"](2,8536064,null,0,s.f,[s.m,l.ElementRef,l.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),l["\u0275ted"](-1,null,["No Backups"]))],(function(n,e){n(e,2,0,"config.restore.message_no_backups")}),null)}function S(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-elegant mr-auto"],["type","button"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.deleteAllBackups()&&l),l}),null,null)),l["\u0275did"](1,8536064,null,0,s.f,[s.m,l.ElementRef,l.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),l["\u0275ted"](-1,null,["Remove All Backups"]))],(function(n,e){n(e,1,0,"config.restore.button_remote_all_backups")}),null)}function L(n){return l["\u0275vid"](0,[l["\u0275pid"](0,m.DatePipe,[l.LOCALE_ID]),(n()(),l["\u0275eld"](1,0,null,null,20,"div",[["class","modal-content"]],null,null,null,null,null)),(n()(),l["\u0275eld"](2,0,null,null,6,"div",[["class","modal-header"]],null,null,null,null,null)),(n()(),l["\u0275eld"](3,0,null,null,2,"h5",[["class","modal-title"]],null,null,null,null,null)),l["\u0275did"](4,8536064,null,0,s.f,[s.m,l.ElementRef,l.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),l["\u0275ted"](-1,null,[" Restore Homebridge Config Backup "])),(n()(),l["\u0275eld"](6,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["data-dismiss","modal"],["type","button"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.activeModal.dismiss("Cross click")&&l),l}),null,null)),(n()(),l["\u0275eld"](7,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(n()(),l["\u0275ted"](-1,null,["\xd7"])),(n()(),l["\u0275eld"](9,0,null,null,6,"div",[["class","modal-body"]],null,null,null,null,null)),(n()(),l["\u0275and"](16777216,null,null,1,null,V)),l["\u0275did"](11,16384,null,0,m.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275and"](16777216,null,null,1,null,O)),l["\u0275did"](13,16384,null,0,m.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275and"](16777216,null,null,1,null,N)),l["\u0275did"](15,16384,null,0,m.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275eld"](16,0,null,null,5,"div",[["class","modal-footer"]],null,null,null,null,null)),(n()(),l["\u0275and"](16777216,null,null,1,null,S)),l["\u0275did"](18,16384,null,0,m.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275eld"](19,0,null,null,2,"button",[["class","btn btn-primary"],["data-dismiss","modal"],["type","button"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.activeModal.dismiss("Cross click")&&l),l}),null,null)),l["\u0275did"](20,8536064,null,0,s.f,[s.m,l.ElementRef,l.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),l["\u0275ted"](-1,null,["Cancel"]))],(function(n,e){var t=e.component;n(e,4,0,"config.restore.title_restore_homebridge_backup"),n(e,11,0,t.loading),n(e,13,0,!t.loading&&t.backupList&&t.backupList.length),n(e,15,0,!(t.loading||t.backupList&&t.backupList.length)),n(e,18,0,!t.loading&&t.backupList.length),n(e,20,0,"form.button_cancel")}),null)}function P(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,1,"app-config",[["class","restore-backup"]],null,null,null,L,A)),l["\u0275did"](1,114688,null,0,w,[c.d,s.m,_.j,p.a],null,null)],(function(n,e){n(e,1,0)}),null)}var F=l["\u0275ccf"]("app-config.restore-backup",w,P,{},{},[]);class J{constructor(n,e,t){this.$api=n,this.$toastr=e,this.$router=t}resolve(n,e){return this.$api.get("/config-editor").toPromise().then(n=>JSON.stringify(n,null,4)).catch(n=>{this.$toastr.error(n.message,"Failed to Load Config"),this.$router.navigate(["/"])})}}class q{}var z=l["\u0275cmf"](i,[],(function(n){return l["\u0275mod"]([l["\u0275mpd"](512,l.ComponentFactoryResolver,l["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,o.b,o.j,o.k,o.g,o.h,o.i,r.a,x,F]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["\u0275mpd"](4608,m.NgLocalization,m.NgLocaleLocalization,[l.LOCALE_ID]),l["\u0275mpd"](4608,u.z,u.z,[]),l["\u0275mpd"](4608,u.f,u.f,[]),l["\u0275mpd"](4608,c.x,c.x,[l.ComponentFactoryResolver,l.Injector,c.vb,c.y]),l["\u0275mpd"](4608,s.i,s.h,[]),l["\u0275mpd"](4608,s.d,s.g,[]),l["\u0275mpd"](4608,s.k,s.e,[]),l["\u0275mpd"](4608,s.c,s.b,[]),l["\u0275mpd"](4608,s.m,s.m,[s.n,s.i,s.d,s.k,s.c,s.o,s.q,s.p,s.a]),l["\u0275mpd"](4608,J,J,[p.a,_.j,k.l]),l["\u0275mpd"](1073742336,m.CommonModule,m.CommonModule,[]),l["\u0275mpd"](1073742336,u.y,u.y,[]),l["\u0275mpd"](1073742336,u.l,u.l,[]),l["\u0275mpd"](1073742336,u.v,u.v,[]),l["\u0275mpd"](1073742336,d.b,d.b,[]),l["\u0275mpd"](1073742336,c.c,c.c,[]),l["\u0275mpd"](1073742336,c.g,c.g,[]),l["\u0275mpd"](1073742336,c.i,c.i,[]),l["\u0275mpd"](1073742336,c.m,c.m,[]),l["\u0275mpd"](1073742336,c.n,c.n,[]),l["\u0275mpd"](1073742336,c.t,c.t,[]),l["\u0275mpd"](1073742336,c.v,c.v,[]),l["\u0275mpd"](1073742336,c.z,c.z,[]),l["\u0275mpd"](1073742336,c.B,c.B,[]),l["\u0275mpd"](1073742336,c.G,c.G,[]),l["\u0275mpd"](1073742336,c.L,c.L,[]),l["\u0275mpd"](1073742336,c.O,c.O,[]),l["\u0275mpd"](1073742336,c.T,c.T,[]),l["\u0275mpd"](1073742336,c.bb,c.bb,[]),l["\u0275mpd"](1073742336,c.eb,c.eb,[]),l["\u0275mpd"](1073742336,c.hb,c.hb,[]),l["\u0275mpd"](1073742336,c.kb,c.kb,[]),l["\u0275mpd"](1073742336,c.W,c.W,[]),l["\u0275mpd"](1073742336,c.A,c.A,[]),l["\u0275mpd"](1073742336,s.j,s.j,[]),l["\u0275mpd"](1073742336,k.p,k.p,[[2,k.u],[2,k.l]]),l["\u0275mpd"](1073742336,q,q,[]),l["\u0275mpd"](1073742336,i,i,[]),l["\u0275mpd"](1024,k.j,(function(){return[[{path:"",component:C,resolve:{config:J}}]]}),[]),l["\u0275mpd"](256,s.q,void 0,[]),l["\u0275mpd"](256,s.o,void 0,[]),l["\u0275mpd"](256,s.p,void 0,[]),l["\u0275mpd"](256,s.a,void 0,[])])}))}}]);